#Importing the required libraries. 
from psychopy import visual, core, logging, event
from datetime import datetime
from psychopy.hardware import keyboard
from psychopy import gui

#Add participant information
participant = gui.Dlg(title = "Participant info")
participant.addText('Please fill in your name:')
participant.addField('Name:')
participant.show()
if participant.OK:
    Name = participant.data[0]
print(Name)

# Set logging level and create log file with timestamp
timestamp=datetime.now().strftime("%Y%m%d-%H%M%S")
lastLog = logging.LogFile(Name +timestamp+".log", level=logging.INFO, filemode='w')
# Here the 'name' variable form the participant info is added to the name of the logfile. 

#Monitor and window specifications
mywin = visual.Window([1366, 768], monitor="New", units="deg", color = 'black',)
kb = keyboard.Keyboard()

#Intructions for the participants
Participant_Instruction = visual.TextStim(mywin, text =''' 
Welcome! 
Instructions: 
    1. You will be shown an experimental set of four shapes with colours. Please look at them carefully. 
    2. You will then be presented with another shape. You are required to ignore this. 
    3. A final image will be shown. Please report whether this image was present in the set of first four images.
    4. Press 1 for "Yes" and 2 for "No"', 
''')   
Participant_Instruction.draw()
mywin.update()
Subject_Response = event.waitKeys(keyList=['1', '2'])
print(Subject_Response)

#Initial Blank screen; to focus on the center
start = visual.TextStim(mywin, text = '+')
start.draw()
for frame in range(100):
    start.draw()
    mywin.update()
    
#Trial 1 - Plausible suffix
trial_1 = visual.TextStim(mywin, text ='''Trial 1
Ready?''')
for frame in range(150):
    trial_1.draw()
    mywin.update()
   
    
#Experimental set: introduce four image as a stimulation
redcircle = visual.ImageStim(win=mywin, image="redcircle.png", size=10, pos=[-10,-8], units="deg")
yellowspark = visual.ImageStim(win=mywin, image="yellowspark.png", size=10, pos=[-10,8], units="deg")
purpletriangle = visual.ImageStim(win=mywin, image="purpletriangle.png", size=10, pos=[10,-8], units="deg")
limehexagon = visual.ImageStim(win=mywin, image="limehexagon.png", size=10, pos=[10,8], units="deg")

# Stimulus shown for 5s, refresh rate = 50Hz
for frame in range(250):
   redcircle.draw()
   yellowspark.draw()
   purpletriangle.draw()
   limehexagon.draw()
   mywin.update()
   
   
 #Blank screen after array stimuli
start = visual.TextStim(mywin, text = '+')
start.draw()
for frame in range(100):
    start.draw()
    mywin.update()

